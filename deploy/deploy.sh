#!/bin/bash

while IFS= read -r zone; do
    gcloud compute instances create "pyramid-$zone" --project=cgfy-stephan --zone=asia-southeast1-b --machine-type=e2-highmem-8 --network-interface=network-tier=PREMIUM,stack-type=IPV4_ONLY,subnet=default --metadata=^,@^startup-script-url=https://storage.cloud.google.com/geoserver-web-xml/startup.sh,@startup-script-run=true,@ssh-keys=stephen_chen:ecdsa-sha2-nistp256\ AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBHQ4BT07QNtdmv4jfFnTkXx7VRNZSzaQ/KOlEYsFTNQBYf7VB7QKGmSy7RAJRyzc6/l\+TRedV6q7Pyk74DUU\+x0=\ google-ssh\ \{\"userName\":\"stephen.chen@cognitive.earth\",\"expireOn\":\"2023-06-01T05:30:43\+0000\"\}$'\n'stephen_chen:ssh-rsa\ AAAAB3NzaC1yc2EAAAADAQABAAABAQCy0XsvmTcIvatVvzfWhyyKWWRqxcj9nQpG4U0pwhZFn/OBxciDa3xj9dn5mf\+vaBm/M6k270w\+cY1UU\+N1wxbicA2PY2jtgWEW\+Tw3aICr2UKEAGdOkIbtKZqhPEkG\+O24Y9Ci7JvPluk\+vm6HM7zgsFBFz7u49zdV5ei\+jeZkQH0JBdhAp/8oOUu8ELVut3Ou8lOmq9REA837QDkN7YPHJTuWaFpP7lRBemG5wQCsuYGRC66XUHNPWhIHsSE6b5l3XnAn/4TjREO/W1Yf6kHJXhnAQeXAIFS1MG7ZjGGMom4Li\+4ic/BLFXI/ntvcQlbWH57MxWjZYi\+nbeSSnK3D\ google-ssh\ \{\"userName\":\"stephen.chen@cognitive.earth\",\"expireOn\":\"2023-06-01T05:30:58\+0000\"\} --maintenance-policy=MIGRATE --provisioning-model=STANDARD --service-account=191587845698-compute@developer.gserviceaccount.com --scopes=https://www.googleapis.com/auth/devstorage.read_only,https://www.googleapis.com/auth/logging.write,https://www.googleapis.com/auth/monitoring.write,https://www.googleapis.com/auth/servicecontrol,https://www.googleapis.com/auth/service.management.readonly,https://www.googleapis.com/auth/trace.append --min-cpu-platform=Automatic --tags=http-server,https-server --no-shielded-secure-boot --shielded-vtpm --shielded-integrity-monitoring --labels=goog-ec-src=vm_add-gcloud --reservation-affinity=any --source-machine-image=pyramid-template-tiny4
done < zone
